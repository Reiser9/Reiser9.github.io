const priceData = {
    home: {
        system: {
            registrator: 8200,
            server: 158000
        },
        camera: {
            inside: 5100,
            outside: 6200,
            outsideHome: 6200
        },
        memory: {
            five: 3800,
            ten: 3800,
            twenty: 3800,
            thirty: 6900,
            sixty: 10200
        },
        more: {
            sound: 500,
            remote: 500,
            view: 8000
        },
        deadline: {
            fast: 5000,
            medium: 0,
            slow: 0
        },
        internet: {
            yes: 0,
            no: 8000
        },
        quality: {
            cheaply: 0,
            medium: 5000,
            expensive: 15000
        },
        complex: {
            yes: 15000,
            no: 0
        }
    },
    flat: {
        system: {
            registrator: 5100,
            server: 158000
        },
        camera: {
            inside: 5100,
            outside: 6200,
            outsideHome: 6200
        },
        memory: {
            five: 3800,
            ten: 3800,
            twenty: 3800,
            thirty: 6900,
            sixty: 10200
        },
        more: {
            sound: 500,
            remote: 500,
            view: 8000
        },
        deadline: {
            fast: 5000,
            medium: 0,
            slow: 0
        },
        internet: {
            yes: 0,
            no: 8000
        },
        quality: {
            cheaply: 0,
            medium: 5000,
            expensive: 15000
        },
        complex: {
            yes: 15000,
            no: 0
        }
    },
    store: {
        system: {
            registrator: 8200,
            server: 158000
        },
        camera: {
            inside: 5100,
            outside: 6200,
            outsideHome: 6200
        },
        memory: {
            five: 3800,
            ten: 3800,
            twenty: 3800,
            thirty: 6900,
            sixty: 10200
        },
        more: {
            sound: 500,
            remote: 500,
            view: 8000
        },
        deadline: {
            fast: 5000,
            medium: 0,
            slow: 0
        },
        internet: {
            yes: 0,
            no: 8000
        },
        quality: {
            cheaply: 0,
            medium: 5000,
            expensive: 15000
        },
        complex: {
            yes: 15000,
            no: 0
        }
    },
    office: {
        system: {
            registrator: 5100,
            server: 158000
        },
        camera: {
            inside: 5100,
            outside: 6200,
            outsideHome: 6200
        },
        memory: {
            five: 3800,
            ten: 3800,
            twenty: 3800,
            thirty: 6900,
            sixty: 10200
        },
        more: {
            sound: 500,
            remote: 500,
            view: 8000
        },
        deadline: {
            fast: 5000,
            medium: 0,
            slow: 0
        },
        internet: {
            yes: 0,
            no: 8000
        },
        quality: {
            cheaply: 0,
            medium: 5000,
            expensive: 15000
        },
        complex: {
            yes: 15000,
            no: 0
        }
    },
    warehouse: {
        system: {
            registrator: 8200,
            server: 158000
        },
        camera: {
            inside: 5100,
            outside: 6200,
            outsideHome: 6200
        },
        memory: {
            five: 3800,
            ten: 3800,
            twenty: 3800,
            thirty: 6900,
            sixty: 10200
        },
        more: {
            sound: 500,
            remote: 500,
            view: 8000
        },
        deadline: {
            fast: 5000,
            medium: 0,
            slow: 0
        },
        internet: {
            yes: 0,
            no: 8000
        },
        quality: {
            cheaply: 0,
            medium: 5000,
            expensive: 15000
        },
        complex: {
            yes: 15000,
            no: 0
        }
    },
    carWash: {
        system: {
            registrator: 8200,
            server: 158000
        },
        camera: {
            inside: 5100,
            outside: 6200,
            outsideHome: 6200
        },
        memory: {
            five: 3800,
            ten: 3800,
            twenty: 3800,
            thirty: 6900,
            sixty: 10200
        },
        more: {
            sound: 500,
            remote: 500,
            view: 8000
        },
        deadline: {
            fast: 5000,
            medium: 0,
            slow: 0
        },
        internet: {
            yes: 0,
            no: 8000
        },
        quality: {
            cheaply: 0,
            medium: 5000,
            expensive: 15000
        },
        complex: {
            yes: 15000,
            no: 0
        }
    },
    elevator: {
        system: {
            registrator: 5100,
            server: 158000
        },
        camera: {
            inside: 5100,
            outside: 6200,
            outsideHome: 6200
        },
        memory: {
            five: 3800,
            ten: 3800,
            twenty: 3800,
            thirty: 6900,
            sixty: 10200
        },
        more: {
            sound: 500,
            remote: 500,
            view: 8000
        },
        deadline: {
            fast: 5000,
            medium: 0,
            slow: 0
        },
        internet: {
            yes: 0,
            no: 8000
        },
        quality: {
            cheaply: 0,
            medium: 5000,
            expensive: 15000
        },
        complex: {
            yes: 15000,
            no: 0
        }
    },
    airport: {
        system: {
            registrator: 32000,
            server: 158000
        },
        camera: {
            inside: 12800,
            outside: 16000,
            outsideHome: 16200
        },
        memory: {
            five: 23800,
            ten: 23800,
            twenty: 23800,
            thirty: 36900,
            sixty: 50200
        },
        more: {
            sound: 10000,
            remote: 10000,
            view: 50000
        },
        deadline: {
            fast: 5000,
            medium: 0,
            slow: 0
        },
        internet: {
            yes: 0,
            no: 8000
        },
        quality: {
            cheaply: 0,
            medium: 5000,
            expensive: 15000
        },
        complex: {
            yes: 80000,
            no: 0
        }
    },
    mall: {
        system: {
            registrator: 32000,
            server: 158000
        },
        camera: {
            inside: 12800,
            outside: 16000,
            outsideHome: 16200
        },
        memory: {
            five: 23800,
            ten: 23800,
            twenty: 23800,
            thirty: 36900,
            sixty: 50200
        },
        more: {
            sound: 10000,
            remote: 10000,
            view: 50000
        },
        deadline: {
            fast: 5000,
            medium: 0,
            slow: 0
        },
        internet: {
            yes: 0,
            no: 8000
        },
        quality: {
            cheaply: 0,
            medium: 5000,
            expensive: 15000
        },
        complex: {
            yes: 80000,
            no: 0
        }
    },
    factory: {
        system: {
            registrator: 32000,
            server: 158000
        },
        camera: {
            inside: 12800,
            outside: 16000,
            outsideHome: 16200
        },
        memory: {
            five: 23800,
            ten: 23800,
            twenty: 23800,
            thirty: 36900,
            sixty: 50200
        },
        more: {
            sound: 10000,
            remote: 10000,
            view: 50000
        },
        deadline: {
            fast: 5000,
            medium: 0,
            slow: 0
        },
        internet: {
            yes: 0,
            no: 8000
        },
        quality: {
            cheaply: 0,
            medium: 5000,
            expensive: 15000
        },
        complex: {
            yes: 80000,
            no: 0
        }
    }
}

$(document).ready(function(){

    const scroll = () => {
        if($(window).scrollTop() > 20){
            $("header").addClass("active");
        }
        else{
            $("header").removeClass("active");
        }
    }

    scroll();
    $(window).scroll(function(){
        scroll();
    });

    // Mobile menu
    const close = () => {
        $("body").removeClass("scroll");
        $(".menu__inner").removeClass("active");
        $(".mobile__menu").removeClass("active");
    }

    $(".go").on("click", function(e){
		e.preventDefault();
		let point = $(this).attr("data-point");
        close();

		$('body,html').animate({scrollTop: $("#"+point).offset().top}, 500);
	});

    $(".menu__inner").on("click", function(){
        $(this).toggleClass("active");
        $(".mobile__menu").toggleClass("active");
        $("body").toggleClass("scroll");
    });

    $(".mobile__menu").on("click", function(){
        close();
    });

    $(".mobile__menu--inner").on("click", function(e){
        e.stopPropagation();
    });

    // Модалки
    $(".buttonModalShow").on("click", function(e){
        e.preventDefault();

        $("body").addClass("scroll2");
        const modal = $(this).attr("data-modal");

        $(".modal[data-modal="+modal+"]").addClass("active");
    });

    $(".modal__close").on("click", function(e){
        e.preventDefault();

        $("body").removeClass("scroll2");
        $(".modal").removeClass("active");
    });

    $(".modal").on("click", function(){
        $("body").removeClass("scroll2");
        $(".modal").removeClass("active");
    });

    $(".modal__content").on("click", function(e){
        e.stopPropagation();
    });

    // Калькулятор
    let currentStep = 1;
    const totalSteps = 9;
    let totalSum = 0;

    let type, system, insideCam, outsideCam, outsideHomeCam, memory, sound, remote, view, deadline, internet, quality, complex;

    const calculateTotalSum = () => {
        // Объект цен определенного типа
        const typeObject = priceData[type];

        // Цена за систему
        totalSum += typeObject.system[system];

        // Цена за камеры
        if(insideCam){
            totalSum += typeObject.camera.inside * Number(insideCam);
        }
        if(outsideCam){
            totalSum += typeObject.camera.outside * Number(outsideCam);
        }
        if(outsideHomeCam){
            totalSum += typeObject.camera.outsideHome * Number(outsideHomeCam);
        }

        // Цена за память
        totalSum += typeObject.memory[memory];

        // Цена за допы
        if(sound){
            totalSum += typeObject.more.sound;
        }
        if(remote){
            totalSum += typeObject.more.remote;
        }
        if(view){
            totalSum += typeObject.more.view;
        }

        // Цена за дедлайн
        totalSum += typeObject.deadline[deadline];
        
        // Цена за установку интернета
        totalSum += typeObject.internet[internet];

        // Цена за качество
        totalSum += typeObject.quality[quality];

        // Цена за готовый комплект
        totalSum += typeObject.complex[complex];
        
        $(".calc__total--price").text(`${totalSum.toLocaleString()} руб.`);
    }

    const showButtonsCalc = () => {
        $(".calc__step").text(currentStep);
        $(".calc__step--all").text(totalSteps);

        if(currentStep === 1){
            $(".calc__button--prev").addClass("inactive");
        }
        else{
            $(".calc__button--prev").removeClass("inactive");
        }
    
        if(currentStep === totalSteps + 1){
            $(".calc__button--next").addClass("inactive");
        }
        else{
            $(".calc__button--next").removeClass("inactive");
        }
    }

    const checkDisabledButtons = () => {
        if(currentStep === 1 && type){
            $(".calc__button--next").removeClass("disabled");
        }
        else if(currentStep === 2 && system){
            $(".calc__button--next").removeClass("disabled");
        }
        else if(currentStep === 3){
            $(".calc__button--next").removeClass("disabled");
        }
        else if(currentStep === 4 && memory){
            $(".calc__button--next").removeClass("disabled");
        }
        else if(currentStep === 5){
            $(".calc__button--next").removeClass("disabled");
        }
        else if(currentStep === 6 && deadline){
            $(".calc__button--next").removeClass("disabled");
        }
        else if(currentStep === 7 && internet){
            $(".calc__button--next").removeClass("disabled");
        }
        else if(currentStep === 8 && quality){
            $(".calc__button--next").removeClass("disabled");
        }
        else if(currentStep === 9 && complex){
            $(".calc__button--next").removeClass("disabled");
        }
    }

    showButtonsCalc();

    $(".calc__button--prev").on("click", function(){
        if(currentStep <= 1){
            return;
        }

        currentStep--;

        $(".calc__step--content").removeClass("active");
        $(".calc__step--content").eq(currentStep - 1).addClass("active");

        showButtonsCalc();
        checkDisabledButtons();
    });

    $(".calc__button--next").on("click", function(){
        if(currentStep === totalSteps){
            $(".calc__step--content").removeClass("active");
            $(".calc__buttons").remove();
            $(".calc__finally").addClass("active");

            calculateTotalSum();

            return;
        }

        if(currentStep >= totalSteps){
            return;
        }

        currentStep++;

        $(".calc__step--content").removeClass("active");
        $(".calc__step--content").eq(currentStep - 1).addClass("active");
        $(this).addClass("disabled");

        showButtonsCalc();
        checkDisabledButtons();
    });

    // Изменение инпутов в калькуляторе
    $("input[name='type']").on("input", function(){
        type = $("input[name='type']:checked").val();

        if(type){
            checkDisabledButtons();
        }
    });

    $("input[name='system']").on("input", function(){
        system = $("input[name='system']:checked").val();

        if(system){
            checkDisabledButtons();
        }
    });

    $("input[name='memory']").on("input", function(){
        memory = $("input[name='memory']:checked").val();

        if(memory){
            checkDisabledButtons();
        }
    });

    $("input[name='more']").on("input", function(){
        let currentValue = $(this).val();
        let checked = $(this).prop("checked");

        if(currentValue === "sound"){
            sound = checked;
        }
        else if(currentValue === "remote"){
            remote = checked;
        }
        else if(currentValue === "view"){
            view = checked;
        }

        checkDisabledButtons();
    });

    $("input[name='deadline']").on("input", function(){
        deadline = $("input[name='deadline']:checked").val();

        if(deadline){
            checkDisabledButtons();
        }
    });

    $("input[name='internet']").on("input", function(){
        internet = $("input[name='internet']:checked").val();

        if(internet){
            checkDisabledButtons();
        }
    });

    $("input[name='quality']").on("input", function(){
        quality = $("input[name='quality']:checked").val();

        if(quality){
            checkDisabledButtons();
        }
    });

    $("input[name='complex']").on("input", function(){
        complex = $("input[name='complex']:checked").val();

        if(complex){
            checkDisabledButtons();
        }
    });

    // Слайдеры
    $(".calc__slider").on("input", function(){
        $(this).siblings(".calc__slider--text--inner").children(".calc__slider--value").text($(this).val());
    });

    $(".calc__slider").on("change", function(){
        let value = $(this).val();
        let name = $(this).attr("name");
        
        if(name === "inside"){
            insideCam = value;
        }
        else if(name === "outside"){
            outsideCam = value;
        }
        else if(name === "outsideHome"){
            outsideHomeCam = value;
        }
    });

	// Карусели
    $('.reviews__slider').slick({
		infinite: true,
	  	slidesToShow: 1,
	  	slidesToScroll: 1,
        nextArrow: '<svg class="reviews__slider--arrow next" width="24" height="44" viewBox="0 0 24 44" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.5"><path d="M0.523834 40.7107C0.188187 41.0422 0 41.4891 0 41.9547C0 42.4203 0.188187 42.8672 0.523834 43.1987C0.688885 43.362 0.88562 43.4917 1.10259 43.5802C1.31956 43.6687 1.55243 43.7143 1.78766 43.7143C2.02288 43.7143 2.25576 43.6687 2.47273 43.5802C2.6897 43.4917 2.88644 43.362 3.05149 43.1987L23.4762 23.1012C23.8118 22.7697 24 22.3228 24 21.8571C24 21.3915 23.8118 20.9446 23.4762 20.6131L3.05149 0.51556C2.88644 0.352275 2.6897 0.222603 2.47273 0.134092C2.25576 0.0455818 2.02288 0 1.78766 0C1.55243 0 1.31956 0.0455818 1.10259 0.134092C0.88562 0.222603 0.688885 0.352275 0.523834 0.51556C0.188187 0.84704 0 1.29395 0 1.75959C0 2.22522 0.188187 2.67213 0.523834 3.00361L19.1512 21.8584L0.523834 40.7107Z" fill="#DCDEF1" style="fill:#DCDEF1;fill:color(display-p3 0.8627 0.8706 0.9451);fill-opacity:1;"/></g></svg>',
        prevArrow: '<svg class="reviews__slider--arrow prev" width="24" height="44" viewBox="0 0 24 44" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.5"><path d="M23.4762 40.7107C23.8118 41.0422 24 41.4891 24 41.9547C24 42.4203 23.8118 42.8672 23.4762 43.1987C23.3111 43.362 23.1144 43.4917 22.8974 43.5802C22.6804 43.6687 22.4476 43.7143 22.2123 43.7143C21.9771 43.7143 21.7442 43.6687 21.5273 43.5802C21.3103 43.4917 21.1136 43.362 20.9485 43.1987L0.523831 23.1012C0.188184 22.7697 0 22.3228 0 21.8571C0 21.3915 0.188184 20.9446 0.523831 20.6131L20.9485 0.51556C21.1136 0.352275 21.3103 0.222603 21.5273 0.134092C21.7442 0.0455818 21.9771 0 22.2123 0C22.4476 0 22.6804 0.0455818 22.8974 0.134092C23.1144 0.222603 23.3111 0.352275 23.4762 0.51556C23.8118 0.84704 24 1.29395 24 1.75959C24 2.22522 23.8118 2.67213 23.4762 3.00361L4.84875 21.8584L23.4762 40.7107Z" fill="#DCDEF1" style="fill:#DCDEF1;fill:color(display-p3 0.8627 0.8706 0.9451);fill-opacity:1;"/></g></svg>',
        responsive: [
            {
                breakpoint: 998,
                settings: {
                    arrows: false,
                    dots: true
                }
            },
        ]
	});

    $(".solutions__content").slick({
		infinite: true,
	  	slidesToShow: 3,
	  	slidesToScroll: 1,
        centerMode: true,
        centerPadding: 0,
        dots: true,
        arrows: false,
        responsive: [
            {
                breakpoint: 998,
                settings: {
                    slidesToShow: 1,
                    centerPadding: '20vw'
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 1,
                    centerPadding: '10vw'
                }
            },
            {
                breakpoint: 768,
                settings: {
                    slidesToShow: 1,
                    centerPadding: '0'
                }
            },
        ]
	});

    $(".main__slider").slick({
		infinite: true,
	  	slidesToShow: 1,
	  	slidesToScroll: 1,
        dots: true,
        arrows: false,
        fade: true,
        cssEase: 'linear',
        autoplay: 2000
	});

});